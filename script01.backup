--
-- PostgreSQL database dump
--

-- Dumped from database version 9.3.2
-- Dumped by pg_dump version 9.3.2
-- Started on 2014-07-01 16:32:46

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 222 (class 3079 OID 11750)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2247 (class 0 OID 0)
-- Dependencies: 222
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

--
-- TOC entry 236 (class 1255 OID 50721)
-- Name: actualizar_tipo_users(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION actualizar_tipo_users() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE BEGIN
	
	IF (NEW.tipo = 'conductor' AND OLD.tipo='cli_nat')   THEN

		INSERT INTO drivers VALUES (NEW.rut, NEW.nombre, NEW.apellidos, NEW.telefono1, NEW.telefono2, NEW.email, NEW.venc_lic_cond);
							
	END IF;

	
	RETURN NULL;
	
END;
$$;


ALTER FUNCTION public.actualizar_tipo_users() OWNER TO postgres;

--
-- TOC entry 235 (class 1255 OID 50719)
-- Name: insertar_clients(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION insertar_clients() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE BEGIN
	
	IF (NEW.tipo = 'cli_nat')   THEN

		INSERT INTO clients VALUES (NEW.rut, NEW.nombre, NEW.apellidos, NEW.telefono1, NEW.telefono2, NEW.email);
		INSERT INTO natural_clients VALUES (NEW.rut);		
					
	END IF;

	IF (NEW.tipo = 'conductor')   THEN
	
		INSERT INTO drivers VALUES (NEW.rut, NEW.nombre, NEW.apellidos, NEW.telefono1, NEW.telefono2, NEW.email, NEW.venc_lic_cond);
		
							
	END IF;
	
	RETURN NULL;
	
END;
$$;


ALTER FUNCTION public.insertar_clients() OWNER TO postgres;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 171 (class 1259 OID 50347)
-- Name: assigneds; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE assigneds (
    id integer NOT NULL,
    id_veh integer NOT NULL,
    run_driv character varying(40) NOT NULL,
    ini_assigned date,
    fin_assigned date
);


ALTER TABLE public.assigneds OWNER TO postgres;

--
-- TOC entry 170 (class 1259 OID 50345)
-- Name: assigneds_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE assigneds_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.assigneds_id_seq OWNER TO postgres;

--
-- TOC entry 2248 (class 0 OID 0)
-- Dependencies: 170
-- Name: assigneds_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE assigneds_id_seq OWNED BY assigneds.id;


--
-- TOC entry 173 (class 1259 OID 50358)
-- Name: base_prices; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE base_prices (
    id_base_pr integer NOT NULL,
    val_base integer,
    ini_val_base date,
    fin_val_base date,
    estado_val_base character varying(40)
);


ALTER TABLE public.base_prices OWNER TO postgres;

--
-- TOC entry 172 (class 1259 OID 50356)
-- Name: base_prices_id_base_pr_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE base_prices_id_base_pr_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.base_prices_id_base_pr_seq OWNER TO postgres;

--
-- TOC entry 2249 (class 0 OID 0)
-- Dependencies: 172
-- Name: base_prices_id_base_pr_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE base_prices_id_base_pr_seq OWNED BY base_prices.id_base_pr;


--
-- TOC entry 177 (class 1259 OID 50377)
-- Name: bill_details; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE bill_details (
    id_bill_det integer NOT NULL,
    id_bil integer NOT NULL,
    id_conc integer NOT NULL,
    monto_det_fact integer
);


ALTER TABLE public.bill_details OWNER TO postgres;

--
-- TOC entry 176 (class 1259 OID 50375)
-- Name: bill_details_id_bill_det_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE bill_details_id_bill_det_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.bill_details_id_bill_det_seq OWNER TO postgres;

--
-- TOC entry 2250 (class 0 OID 0)
-- Dependencies: 176
-- Name: bill_details_id_bill_det_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE bill_details_id_bill_det_seq OWNED BY bill_details.id_bill_det;


--
-- TOC entry 175 (class 1259 OID 50367)
-- Name: bills; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE bills (
    id_bil integer NOT NULL,
    rut_ent character varying(40),
    fecha_fact date,
    total_fact integer
);


ALTER TABLE public.bills OWNER TO postgres;

--
-- TOC entry 174 (class 1259 OID 50365)
-- Name: bills_id_bil_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE bills_id_bil_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.bills_id_bil_seq OWNER TO postgres;

--
-- TOC entry 2251 (class 0 OID 0)
-- Dependencies: 174
-- Name: bills_id_bil_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE bills_id_bil_seq OWNED BY bills.id_bil;


--
-- TOC entry 178 (class 1259 OID 50386)
-- Name: clients; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE clients (
    run_cli character varying(40) NOT NULL,
    nom_cli character varying(40),
    apells_cli character varying(40),
    tel1_cli character varying(40),
    tel2_cli character varying(40),
    email_cli character varying(40)
);


ALTER TABLE public.clients OWNER TO postgres;

--
-- TOC entry 180 (class 1259 OID 50394)
-- Name: comunnes; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE comunnes (
    id_comun integer NOT NULL,
    nom_comun character varying(50),
    num_comun integer
);


ALTER TABLE public.comunnes OWNER TO postgres;

--
-- TOC entry 179 (class 1259 OID 50392)
-- Name: comunnes_id_comun_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE comunnes_id_comun_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.comunnes_id_comun_seq OWNER TO postgres;

--
-- TOC entry 2252 (class 0 OID 0)
-- Dependencies: 179
-- Name: comunnes_id_comun_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE comunnes_id_comun_seq OWNED BY comunnes.id_comun;


--
-- TOC entry 182 (class 1259 OID 50403)
-- Name: concepts; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE concepts (
    id_conc integer NOT NULL,
    nom_conc character varying(60)
);


ALTER TABLE public.concepts OWNER TO postgres;

--
-- TOC entry 181 (class 1259 OID 50401)
-- Name: concepts_id_conc_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE concepts_id_conc_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.concepts_id_conc_seq OWNER TO postgres;

--
-- TOC entry 2253 (class 0 OID 0)
-- Dependencies: 181
-- Name: concepts_id_conc_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE concepts_id_conc_seq OWNED BY concepts.id_conc;


--
-- TOC entry 183 (class 1259 OID 50410)
-- Name: drivers; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE drivers (
    run_driv character varying(40) NOT NULL,
    nom_cond character varying(40),
    apells_cond character varying(40),
    tel1_cond character varying(40),
    tel2_cond character varying(40),
    email_cond character varying(40),
    venc_licenc_cond date
);


ALTER TABLE public.drivers OWNER TO postgres;

--
-- TOC entry 185 (class 1259 OID 50418)
-- Name: drivers_license_alerts; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE drivers_license_alerts (
    id_mens_alert_licenc integer NOT NULL,
    plant_alert_licenc character varying(1024)
);


ALTER TABLE public.drivers_license_alerts OWNER TO postgres;

--
-- TOC entry 184 (class 1259 OID 50416)
-- Name: drivers_license_alerts_id_mens_alert_licenc_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE drivers_license_alerts_id_mens_alert_licenc_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.drivers_license_alerts_id_mens_alert_licenc_seq OWNER TO postgres;

--
-- TOC entry 2254 (class 0 OID 0)
-- Dependencies: 184
-- Name: drivers_license_alerts_id_mens_alert_licenc_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE drivers_license_alerts_id_mens_alert_licenc_seq OWNED BY drivers_license_alerts.id_mens_alert_licenc;


--
-- TOC entry 187 (class 1259 OID 50430)
-- Name: enterprise_clients; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE enterprise_clients (
    id_cli_ent integer NOT NULL,
    run_cli character varying(40) NOT NULL,
    rut_ent character varying(40)
);


ALTER TABLE public.enterprise_clients OWNER TO postgres;

--
-- TOC entry 186 (class 1259 OID 50428)
-- Name: enterprise_clients_id_cli_ent_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE enterprise_clients_id_cli_ent_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.enterprise_clients_id_cli_ent_seq OWNER TO postgres;

--
-- TOC entry 2255 (class 0 OID 0)
-- Dependencies: 186
-- Name: enterprise_clients_id_cli_ent_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE enterprise_clients_id_cli_ent_seq OWNED BY enterprise_clients.id_cli_ent;


--
-- TOC entry 188 (class 1259 OID 50437)
-- Name: external_enterprises; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE external_enterprises (
    rut_ent character varying(40) NOT NULL,
    giro_emp character varying(40),
    nom_emp character varying(40),
    dir_emp character varying(40),
    tel1_emp character varying(40),
    tel2_emp character varying(40),
    email_emp character varying(40),
    est_conv_emp character varying(40),
    ini_conv_emp date,
    fin_conv_emp date,
    descrip_conv_emp text
);


ALTER TABLE public.external_enterprises OWNER TO postgres;

--
-- TOC entry 190 (class 1259 OID 50448)
-- Name: fixed_rates; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE fixed_rates (
    id_fix_rat integer NOT NULL,
    ori_tar character varying(50),
    dest_tar character varying(50),
    costo_tar integer
);


ALTER TABLE public.fixed_rates OWNER TO postgres;

--
-- TOC entry 189 (class 1259 OID 50446)
-- Name: fixed_rates_id_fix_rat_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE fixed_rates_id_fix_rat_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.fixed_rates_id_fix_rat_seq OWNER TO postgres;

--
-- TOC entry 2256 (class 0 OID 0)
-- Dependencies: 189
-- Name: fixed_rates_id_fix_rat_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE fixed_rates_id_fix_rat_seq OWNED BY fixed_rates.id_fix_rat;


--
-- TOC entry 192 (class 1259 OID 50457)
-- Name: kilometers_prices; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE kilometers_prices (
    id_km_pr integer NOT NULL,
    val_km integer,
    ini_val_km date,
    fin_val_km date,
    estado_val_km character varying(40)
);


ALTER TABLE public.kilometers_prices OWNER TO postgres;

--
-- TOC entry 191 (class 1259 OID 50455)
-- Name: kilometers_prices_id_km_pr_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE kilometers_prices_id_km_pr_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.kilometers_prices_id_km_pr_seq OWNER TO postgres;

--
-- TOC entry 2257 (class 0 OID 0)
-- Dependencies: 191
-- Name: kilometers_prices_id_km_pr_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE kilometers_prices_id_km_pr_seq OWNED BY kilometers_prices.id_km_pr;


--
-- TOC entry 194 (class 1259 OID 50466)
-- Name: log_sqls; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE log_sqls (
    id_log_sql integer NOT NULL,
    tms_log_sql date,
    tabla_log_sql character varying(50),
    operac_log_sql character varying(50),
    usuar_log_sql character varying(50),
    dat_antes_log_sql character varying(50),
    dat_desp_log_sql character varying(50),
    ope_det_log_sql character varying(100)
);


ALTER TABLE public.log_sqls OWNER TO postgres;

--
-- TOC entry 193 (class 1259 OID 50464)
-- Name: log_sqls_id_log_sql_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE log_sqls_id_log_sql_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.log_sqls_id_log_sql_seq OWNER TO postgres;

--
-- TOC entry 2258 (class 0 OID 0)
-- Dependencies: 193
-- Name: log_sqls_id_log_sql_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE log_sqls_id_log_sql_seq OWNED BY log_sqls.id_log_sql;


--
-- TOC entry 195 (class 1259 OID 50473)
-- Name: natural_clients; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE natural_clients (
    run_cli character varying(40) NOT NULL
);


ALTER TABLE public.natural_clients OWNER TO postgres;

--
-- TOC entry 197 (class 1259 OID 50478)
-- Name: offer_vehicles; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE offer_vehicles (
    id_off_veh integer NOT NULL,
    id_block integer,
    run_driv character varying(40),
    est_oferta_veh character varying(40)
);


ALTER TABLE public.offer_vehicles OWNER TO postgres;

--
-- TOC entry 196 (class 1259 OID 50476)
-- Name: offer_vehicles_id_off_veh_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE offer_vehicles_id_off_veh_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.offer_vehicles_id_off_veh_seq OWNER TO postgres;

--
-- TOC entry 2259 (class 0 OID 0)
-- Dependencies: 196
-- Name: offer_vehicles_id_off_veh_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE offer_vehicles_id_off_veh_seq OWNED BY offer_vehicles.id_off_veh;


--
-- TOC entry 200 (class 1259 OID 50495)
-- Name: owner_commissions; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE owner_commissions (
    id_own_com integer NOT NULL,
    porcent_comi_prop double precision,
    ini_comi_prop date,
    fin_comi_prop date
);


ALTER TABLE public.owner_commissions OWNER TO postgres;

--
-- TOC entry 199 (class 1259 OID 50493)
-- Name: owner_commissions_id_own_com_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE owner_commissions_id_own_com_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.owner_commissions_id_own_com_seq OWNER TO postgres;

--
-- TOC entry 2260 (class 0 OID 0)
-- Dependencies: 199
-- Name: owner_commissions_id_own_com_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE owner_commissions_id_own_com_seq OWNED BY owner_commissions.id_own_com;


--
-- TOC entry 198 (class 1259 OID 50487)
-- Name: owners; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE owners (
    run_own character varying(40) NOT NULL,
    nom_prop character varying(40),
    apells_prop character varying(40),
    tel_prop character varying(40),
    email_prop character varying(40)
);


ALTER TABLE public.owners OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 50515)
-- Name: scheduling_blocks; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE scheduling_blocks (
    id_block integer NOT NULL,
    ini_bloq timestamp without time zone,
    fin_bloq timestamp without time zone
);


ALTER TABLE public.scheduling_blocks OWNER TO postgres;

--
-- TOC entry 203 (class 1259 OID 50513)
-- Name: scheduling_blocks_id_block_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE scheduling_blocks_id_block_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.scheduling_blocks_id_block_seq OWNER TO postgres;

--
-- TOC entry 2261 (class 0 OID 0)
-- Dependencies: 203
-- Name: scheduling_blocks_id_block_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE scheduling_blocks_id_block_seq OWNED BY scheduling_blocks.id_block;


--
-- TOC entry 202 (class 1259 OID 50504)
-- Name: schedulings; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE schedulings (
    id_sched integer NOT NULL,
    id_off_veh integer,
    run_driv character varying(40),
    run_cli character varying(40)
);


ALTER TABLE public.schedulings OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 50502)
-- Name: schedulings_id_sched_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE schedulings_id_sched_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.schedulings_id_sched_seq OWNER TO postgres;

--
-- TOC entry 2262 (class 0 OID 0)
-- Dependencies: 201
-- Name: schedulings_id_sched_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE schedulings_id_sched_seq OWNED BY schedulings.id_sched;


--
-- TOC entry 219 (class 1259 OID 50699)
-- Name: schema_migrations; Type: TABLE; Schema: public; Owner: Andres; Tablespace: 
--

CREATE TABLE schema_migrations (
    version character varying(255) NOT NULL
);


ALTER TABLE public.schema_migrations OWNER TO "Andres";

--
-- TOC entry 207 (class 1259 OID 50531)
-- Name: state_histories; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE state_histories (
    id_trav integer NOT NULL,
    id_stat integer NOT NULL
);


ALTER TABLE public.state_histories OWNER TO postgres;

--
-- TOC entry 206 (class 1259 OID 50524)
-- Name: states; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE states (
    id_stat integer NOT NULL,
    nom_est character varying(40)
);


ALTER TABLE public.states OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 50522)
-- Name: states_id_stat_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE states_id_stat_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.states_id_stat_seq OWNER TO postgres;

--
-- TOC entry 2263 (class 0 OID 0)
-- Dependencies: 205
-- Name: states_id_stat_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE states_id_stat_seq OWNED BY states.id_stat;


--
-- TOC entry 209 (class 1259 OID 50538)
-- Name: technical_review_alerts; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE technical_review_alerts (
    id_tec_rev integer NOT NULL,
    plant_alert_rev_tec character varying(1024)
);


ALTER TABLE public.technical_review_alerts OWNER TO postgres;

--
-- TOC entry 208 (class 1259 OID 50536)
-- Name: technical_review_alerts_id_tec_rev_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE technical_review_alerts_id_tec_rev_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.technical_review_alerts_id_tec_rev_seq OWNER TO postgres;

--
-- TOC entry 2264 (class 0 OID 0)
-- Dependencies: 208
-- Name: technical_review_alerts_id_tec_rev_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE technical_review_alerts_id_tec_rev_seq OWNED BY technical_review_alerts.id_tec_rev;


--
-- TOC entry 211 (class 1259 OID 50550)
-- Name: technical_review_expirations; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE technical_review_expirations (
    id_tec_rev_ex integer NOT NULL,
    mes_venc_rev_tec character varying(40),
    num_venc_rev_tec integer
);


ALTER TABLE public.technical_review_expirations OWNER TO postgres;

--
-- TOC entry 210 (class 1259 OID 50548)
-- Name: technical_review_expirations_id_tec_rev_ex_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE technical_review_expirations_id_tec_rev_ex_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.technical_review_expirations_id_tec_rev_ex_seq OWNER TO postgres;

--
-- TOC entry 2265 (class 0 OID 0)
-- Dependencies: 210
-- Name: technical_review_expirations_id_tec_rev_ex_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE technical_review_expirations_id_tec_rev_ex_seq OWNED BY technical_review_expirations.id_tec_rev_ex;


--
-- TOC entry 212 (class 1259 OID 50557)
-- Name: transitions; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE transitions (
    id_stat integer NOT NULL,
    sta_id_stat integer NOT NULL
);


ALTER TABLE public.transitions OWNER TO postgres;

--
-- TOC entry 216 (class 1259 OID 50575)
-- Name: travel_requests; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE travel_requests (
    id_trav_req integer NOT NULL,
    run_cli character varying(40),
    dir_orig_sol character varying(60),
    dir_dest_sol character varying(60),
    com_orig_sol character varying(60),
    com_dest_sol character varying(60),
    cant_pasaj_sol integer,
    fecha_crea_sol date,
    fecha_serv_sol timestamp without time zone,
    est_sol character varying(20)
);


ALTER TABLE public.travel_requests OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 50573)
-- Name: travel_requests_id_trav_req_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE travel_requests_id_trav_req_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.travel_requests_id_trav_req_seq OWNER TO postgres;

--
-- TOC entry 2266 (class 0 OID 0)
-- Dependencies: 215
-- Name: travel_requests_id_trav_req_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE travel_requests_id_trav_req_seq OWNED BY travel_requests.id_trav_req;


--
-- TOC entry 214 (class 1259 OID 50564)
-- Name: travels; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE travels (
    id_trav integer NOT NULL,
    run_driv character varying(40),
    id_trav_req integer NOT NULL,
    hora_ini_via date,
    tiemp_est_via time without time zone,
    dist_est_via double precision,
    val_via integer
);


ALTER TABLE public.travels OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 50562)
-- Name: travels_id_trav_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE travels_id_trav_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.travels_id_trav_seq OWNER TO postgres;

--
-- TOC entry 2267 (class 0 OID 0)
-- Dependencies: 213
-- Name: travels_id_trav_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE travels_id_trav_seq OWNED BY travels.id_trav;


--
-- TOC entry 221 (class 1259 OID 50705)
-- Name: users; Type: TABLE; Schema: public; Owner: Andres; Tablespace: 
--

CREATE TABLE users (
    id integer NOT NULL,
    email character varying(255) DEFAULT ''::character varying NOT NULL,
    encrypted_password character varying(255) DEFAULT ''::character varying NOT NULL,
    reset_password_token character varying(255),
    reset_password_sent_at timestamp without time zone,
    remember_created_at timestamp without time zone,
    sign_in_count integer DEFAULT 0,
    current_sign_in_at timestamp without time zone,
    last_sign_in_at timestamp without time zone,
    current_sign_in_ip character varying(255),
    last_sign_in_ip character varying(255),
    tipo character varying(255) DEFAULT 'cli_nat'::character varying,
    rut character varying(255),
    nombre character varying(255),
    apellidos character varying(255),
    telefono1 character varying(255),
    telefono2 character varying(255),
    venc_lic_cond date,
    created_at timestamp without time zone,
    updated_at timestamp without time zone
);


ALTER TABLE public.users OWNER TO "Andres";

--
-- TOC entry 220 (class 1259 OID 50703)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: Andres
--

CREATE SEQUENCE users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.users_id_seq OWNER TO "Andres";

--
-- TOC entry 2268 (class 0 OID 0)
-- Dependencies: 220
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: Andres
--

ALTER SEQUENCE users_id_seq OWNED BY users.id;


--
-- TOC entry 218 (class 1259 OID 50585)
-- Name: vehicles; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE vehicles (
    id_veh integer NOT NULL,
    run_own character varying(40) NOT NULL,
    pat_veh character varying(10),
    mar_veh character varying(20),
    model_veh character varying(20),
    tipo_veh character varying(20),
    km_sem_veh integer
);


ALTER TABLE public.vehicles OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 50583)
-- Name: vehicles_id_veh_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE vehicles_id_veh_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.vehicles_id_veh_seq OWNER TO postgres;

--
-- TOC entry 2269 (class 0 OID 0)
-- Dependencies: 217
-- Name: vehicles_id_veh_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE vehicles_id_veh_seq OWNED BY vehicles.id_veh;


--
-- TOC entry 1987 (class 2604 OID 50350)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY assigneds ALTER COLUMN id SET DEFAULT nextval('assigneds_id_seq'::regclass);


--
-- TOC entry 1988 (class 2604 OID 50361)
-- Name: id_base_pr; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY base_prices ALTER COLUMN id_base_pr SET DEFAULT nextval('base_prices_id_base_pr_seq'::regclass);


--
-- TOC entry 1990 (class 2604 OID 50380)
-- Name: id_bill_det; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY bill_details ALTER COLUMN id_bill_det SET DEFAULT nextval('bill_details_id_bill_det_seq'::regclass);


--
-- TOC entry 1989 (class 2604 OID 50370)
-- Name: id_bil; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY bills ALTER COLUMN id_bil SET DEFAULT nextval('bills_id_bil_seq'::regclass);


--
-- TOC entry 1991 (class 2604 OID 50397)
-- Name: id_comun; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY comunnes ALTER COLUMN id_comun SET DEFAULT nextval('comunnes_id_comun_seq'::regclass);


--
-- TOC entry 1992 (class 2604 OID 50406)
-- Name: id_conc; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY concepts ALTER COLUMN id_conc SET DEFAULT nextval('concepts_id_conc_seq'::regclass);


--
-- TOC entry 1993 (class 2604 OID 50421)
-- Name: id_mens_alert_licenc; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY drivers_license_alerts ALTER COLUMN id_mens_alert_licenc SET DEFAULT nextval('drivers_license_alerts_id_mens_alert_licenc_seq'::regclass);


--
-- TOC entry 1994 (class 2604 OID 50433)
-- Name: id_cli_ent; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY enterprise_clients ALTER COLUMN id_cli_ent SET DEFAULT nextval('enterprise_clients_id_cli_ent_seq'::regclass);


--
-- TOC entry 1995 (class 2604 OID 50451)
-- Name: id_fix_rat; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY fixed_rates ALTER COLUMN id_fix_rat SET DEFAULT nextval('fixed_rates_id_fix_rat_seq'::regclass);


--
-- TOC entry 1996 (class 2604 OID 50460)
-- Name: id_km_pr; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY kilometers_prices ALTER COLUMN id_km_pr SET DEFAULT nextval('kilometers_prices_id_km_pr_seq'::regclass);


--
-- TOC entry 1997 (class 2604 OID 50469)
-- Name: id_log_sql; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY log_sqls ALTER COLUMN id_log_sql SET DEFAULT nextval('log_sqls_id_log_sql_seq'::regclass);


--
-- TOC entry 1998 (class 2604 OID 50481)
-- Name: id_off_veh; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY offer_vehicles ALTER COLUMN id_off_veh SET DEFAULT nextval('offer_vehicles_id_off_veh_seq'::regclass);


--
-- TOC entry 1999 (class 2604 OID 50498)
-- Name: id_own_com; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY owner_commissions ALTER COLUMN id_own_com SET DEFAULT nextval('owner_commissions_id_own_com_seq'::regclass);


--
-- TOC entry 2001 (class 2604 OID 50518)
-- Name: id_block; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY scheduling_blocks ALTER COLUMN id_block SET DEFAULT nextval('scheduling_blocks_id_block_seq'::regclass);


--
-- TOC entry 2000 (class 2604 OID 50507)
-- Name: id_sched; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY schedulings ALTER COLUMN id_sched SET DEFAULT nextval('schedulings_id_sched_seq'::regclass);


--
-- TOC entry 2002 (class 2604 OID 50527)
-- Name: id_stat; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY states ALTER COLUMN id_stat SET DEFAULT nextval('states_id_stat_seq'::regclass);


--
-- TOC entry 2003 (class 2604 OID 50541)
-- Name: id_tec_rev; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY technical_review_alerts ALTER COLUMN id_tec_rev SET DEFAULT nextval('technical_review_alerts_id_tec_rev_seq'::regclass);


--
-- TOC entry 2004 (class 2604 OID 50553)
-- Name: id_tec_rev_ex; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY technical_review_expirations ALTER COLUMN id_tec_rev_ex SET DEFAULT nextval('technical_review_expirations_id_tec_rev_ex_seq'::regclass);


--
-- TOC entry 2006 (class 2604 OID 50578)
-- Name: id_trav_req; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY travel_requests ALTER COLUMN id_trav_req SET DEFAULT nextval('travel_requests_id_trav_req_seq'::regclass);


--
-- TOC entry 2005 (class 2604 OID 50567)
-- Name: id_trav; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY travels ALTER COLUMN id_trav SET DEFAULT nextval('travels_id_trav_seq'::regclass);


--
-- TOC entry 2008 (class 2604 OID 50708)
-- Name: id; Type: DEFAULT; Schema: public; Owner: Andres
--

ALTER TABLE ONLY users ALTER COLUMN id SET DEFAULT nextval('users_id_seq'::regclass);


--
-- TOC entry 2007 (class 2604 OID 50588)
-- Name: id_veh; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY vehicles ALTER COLUMN id_veh SET DEFAULT nextval('vehicles_id_veh_seq'::regclass);


--
-- TOC entry 2015 (class 2606 OID 50352)
-- Name: pk_assigneds; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY assigneds
    ADD CONSTRAINT pk_assigneds PRIMARY KEY (id);


--
-- TOC entry 2020 (class 2606 OID 50363)
-- Name: pk_base_prices; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY base_prices
    ADD CONSTRAINT pk_base_prices PRIMARY KEY (id_base_pr);


--
-- TOC entry 2027 (class 2606 OID 50382)
-- Name: pk_bill_details; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY bill_details
    ADD CONSTRAINT pk_bill_details PRIMARY KEY (id_bill_det);


--
-- TOC entry 2023 (class 2606 OID 50372)
-- Name: pk_bills; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY bills
    ADD CONSTRAINT pk_bills PRIMARY KEY (id_bil);


--
-- TOC entry 2032 (class 2606 OID 50390)
-- Name: pk_clients; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY clients
    ADD CONSTRAINT pk_clients PRIMARY KEY (run_cli);


--
-- TOC entry 2035 (class 2606 OID 50399)
-- Name: pk_comunnes; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY comunnes
    ADD CONSTRAINT pk_comunnes PRIMARY KEY (id_comun);


--
-- TOC entry 2038 (class 2606 OID 50408)
-- Name: pk_concepts; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY concepts
    ADD CONSTRAINT pk_concepts PRIMARY KEY (id_conc);


--
-- TOC entry 2041 (class 2606 OID 50414)
-- Name: pk_drivers; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY drivers
    ADD CONSTRAINT pk_drivers PRIMARY KEY (run_driv);


--
-- TOC entry 2044 (class 2606 OID 50426)
-- Name: pk_drivers_license_alerts; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY drivers_license_alerts
    ADD CONSTRAINT pk_drivers_license_alerts PRIMARY KEY (id_mens_alert_licenc);


--
-- TOC entry 2046 (class 2606 OID 50435)
-- Name: pk_enterprise_clients; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY enterprise_clients
    ADD CONSTRAINT pk_enterprise_clients PRIMARY KEY (id_cli_ent);


--
-- TOC entry 2050 (class 2606 OID 50444)
-- Name: pk_external_enterprises; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY external_enterprises
    ADD CONSTRAINT pk_external_enterprises PRIMARY KEY (rut_ent);


--
-- TOC entry 2053 (class 2606 OID 50453)
-- Name: pk_fixed_rates; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY fixed_rates
    ADD CONSTRAINT pk_fixed_rates PRIMARY KEY (id_fix_rat);


--
-- TOC entry 2056 (class 2606 OID 50462)
-- Name: pk_kilometers_prices; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY kilometers_prices
    ADD CONSTRAINT pk_kilometers_prices PRIMARY KEY (id_km_pr);


--
-- TOC entry 2059 (class 2606 OID 50471)
-- Name: pk_log_sqls; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY log_sqls
    ADD CONSTRAINT pk_log_sqls PRIMARY KEY (id_log_sql);


--
-- TOC entry 2062 (class 2606 OID 50483)
-- Name: pk_offer_vehicles; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY offer_vehicles
    ADD CONSTRAINT pk_offer_vehicles PRIMARY KEY (id_off_veh);


--
-- TOC entry 2070 (class 2606 OID 50500)
-- Name: pk_owner_commissions; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY owner_commissions
    ADD CONSTRAINT pk_owner_commissions PRIMARY KEY (id_own_com);


--
-- TOC entry 2067 (class 2606 OID 50491)
-- Name: pk_owners; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY owners
    ADD CONSTRAINT pk_owners PRIMARY KEY (run_own);


--
-- TOC entry 2077 (class 2606 OID 50520)
-- Name: pk_scheduling_blocks; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY scheduling_blocks
    ADD CONSTRAINT pk_scheduling_blocks PRIMARY KEY (id_block);


--
-- TOC entry 2072 (class 2606 OID 50509)
-- Name: pk_schedulings; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY schedulings
    ADD CONSTRAINT pk_schedulings PRIMARY KEY (id_sched);


--
-- TOC entry 2080 (class 2606 OID 50529)
-- Name: pk_states; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY states
    ADD CONSTRAINT pk_states PRIMARY KEY (id_stat);


--
-- TOC entry 2085 (class 2606 OID 50546)
-- Name: pk_technical_review_alerts; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY technical_review_alerts
    ADD CONSTRAINT pk_technical_review_alerts PRIMARY KEY (id_tec_rev);


--
-- TOC entry 2088 (class 2606 OID 50555)
-- Name: pk_technical_review_expiration; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY technical_review_expirations
    ADD CONSTRAINT pk_technical_review_expiration PRIMARY KEY (id_tec_rev_ex);


--
-- TOC entry 2098 (class 2606 OID 50580)
-- Name: pk_travel_requests; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY travel_requests
    ADD CONSTRAINT pk_travel_requests PRIMARY KEY (id_trav_req);


--
-- TOC entry 2093 (class 2606 OID 50569)
-- Name: pk_travels; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY travels
    ADD CONSTRAINT pk_travels PRIMARY KEY (id_trav);


--
-- TOC entry 2102 (class 2606 OID 50590)
-- Name: pk_vehicles; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY vehicles
    ADD CONSTRAINT pk_vehicles PRIMARY KEY (id_veh);


--
-- TOC entry 2109 (class 2606 OID 50716)
-- Name: users_pkey; Type: CONSTRAINT; Schema: public; Owner: Andres; Tablespace: 
--

ALTER TABLE ONLY users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 2013 (class 1259 OID 50353)
-- Name: assigned_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX assigned_pk ON assigneds USING btree (id);


--
-- TOC entry 2018 (class 1259 OID 50364)
-- Name: base_prices_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX base_prices_pk ON base_prices USING btree (id_base_pr);


--
-- TOC entry 2025 (class 1259 OID 50383)
-- Name: bill_details_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX bill_details_pk ON bill_details USING btree (id_bill_det);


--
-- TOC entry 2021 (class 1259 OID 50373)
-- Name: bills_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX bills_pk ON bills USING btree (id_bil);


--
-- TOC entry 2030 (class 1259 OID 50391)
-- Name: clients_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX clients_pk ON clients USING btree (run_cli);


--
-- TOC entry 2033 (class 1259 OID 50400)
-- Name: comunne_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX comunne_pk ON comunnes USING btree (id_comun);


--
-- TOC entry 2036 (class 1259 OID 50409)
-- Name: concepts_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX concepts_pk ON concepts USING btree (id_conc);


--
-- TOC entry 2042 (class 1259 OID 50427)
-- Name: drivers_license_alerts_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX drivers_license_alerts_pk ON drivers_license_alerts USING btree (id_mens_alert_licenc);


--
-- TOC entry 2039 (class 1259 OID 50415)
-- Name: drivers_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX drivers_pk ON drivers USING btree (run_driv);


--
-- TOC entry 2048 (class 1259 OID 50445)
-- Name: external_enterprises_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX external_enterprises_pk ON external_enterprises USING btree (rut_ent);


--
-- TOC entry 2051 (class 1259 OID 50454)
-- Name: fixed_rates_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX fixed_rates_pk ON fixed_rates USING btree (id_fix_rat);


--
-- TOC entry 2106 (class 1259 OID 50717)
-- Name: index_users_on_email; Type: INDEX; Schema: public; Owner: Andres; Tablespace: 
--

CREATE UNIQUE INDEX index_users_on_email ON users USING btree (email);


--
-- TOC entry 2107 (class 1259 OID 50718)
-- Name: index_users_on_reset_password_token; Type: INDEX; Schema: public; Owner: Andres; Tablespace: 
--

CREATE UNIQUE INDEX index_users_on_reset_password_token ON users USING btree (reset_password_token);


--
-- TOC entry 2054 (class 1259 OID 50463)
-- Name: kilometers_prices_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX kilometers_prices_pk ON kilometers_prices USING btree (id_km_pr);


--
-- TOC entry 2057 (class 1259 OID 50472)
-- Name: log_sqls_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX log_sqls_pk ON log_sqls USING btree (id_log_sql);


--
-- TOC entry 2060 (class 1259 OID 50484)
-- Name: offer_vehicles_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX offer_vehicles_pk ON offer_vehicles USING btree (id_off_veh);


--
-- TOC entry 2068 (class 1259 OID 50501)
-- Name: owner_commissions_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX owner_commissions_pk ON owner_commissions USING btree (id_own_com);


--
-- TOC entry 2065 (class 1259 OID 50492)
-- Name: owners_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX owners_pk ON owners USING btree (run_own);


--
-- TOC entry 2024 (class 1259 OID 50374)
-- Name: relationship_10_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_10_fk ON bills USING btree (rut_ent);


--
-- TOC entry 2073 (class 1259 OID 50510)
-- Name: relationship_11_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_11_fk ON schedulings USING btree (run_driv);


--
-- TOC entry 2074 (class 1259 OID 50511)
-- Name: relationship_12_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_12_fk ON schedulings USING btree (run_cli);


--
-- TOC entry 2094 (class 1259 OID 50572)
-- Name: relationship_13_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_13_fk ON travels USING btree (run_driv);


--
-- TOC entry 2028 (class 1259 OID 50384)
-- Name: relationship_15_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_15_fk ON bill_details USING btree (id_bil);


--
-- TOC entry 2029 (class 1259 OID 50385)
-- Name: relationship_16_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_16_fk ON bill_details USING btree (id_conc);


--
-- TOC entry 2075 (class 1259 OID 50512)
-- Name: relationship_17_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_17_fk ON schedulings USING btree (id_off_veh);


--
-- TOC entry 2063 (class 1259 OID 50485)
-- Name: relationship_18_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_18_fk ON offer_vehicles USING btree (id_block);


--
-- TOC entry 2064 (class 1259 OID 50486)
-- Name: relationship_19_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_19_fk ON offer_vehicles USING btree (run_driv);


--
-- TOC entry 2047 (class 1259 OID 50436)
-- Name: relationship_20_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_20_fk ON enterprise_clients USING btree (rut_ent);


--
-- TOC entry 2016 (class 1259 OID 50354)
-- Name: relationship_21_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_21_fk ON assigneds USING btree (run_driv);


--
-- TOC entry 2017 (class 1259 OID 50355)
-- Name: relationship_22_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_22_fk ON assigneds USING btree (id_veh);


--
-- TOC entry 2095 (class 1259 OID 50571)
-- Name: relationship_2_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_2_fk ON travels USING btree (id_trav_req);


--
-- TOC entry 2103 (class 1259 OID 50592)
-- Name: relationship_3_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_3_fk ON vehicles USING btree (run_own);


--
-- TOC entry 2099 (class 1259 OID 50582)
-- Name: relationship_4_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_4_fk ON travel_requests USING btree (run_cli);


--
-- TOC entry 2090 (class 1259 OID 50560)
-- Name: relationship_5_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_5_fk ON transitions USING btree (sta_id_stat);


--
-- TOC entry 2091 (class 1259 OID 50561)
-- Name: relationship_6_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_6_fk ON transitions USING btree (id_stat);


--
-- TOC entry 2082 (class 1259 OID 50534)
-- Name: relationship_7_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_7_fk ON state_histories USING btree (id_trav);


--
-- TOC entry 2083 (class 1259 OID 50535)
-- Name: relationship_8_fk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE INDEX relationship_8_fk ON state_histories USING btree (id_stat);


--
-- TOC entry 2078 (class 1259 OID 50521)
-- Name: scheduling_blocks_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX scheduling_blocks_pk ON scheduling_blocks USING btree (id_block);


--
-- TOC entry 2081 (class 1259 OID 50530)
-- Name: states_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX states_pk ON states USING btree (id_stat);


--
-- TOC entry 2086 (class 1259 OID 50547)
-- Name: technical_review_alerts_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX technical_review_alerts_pk ON technical_review_alerts USING btree (id_tec_rev);


--
-- TOC entry 2089 (class 1259 OID 50556)
-- Name: technical_review_expirations_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX technical_review_expirations_pk ON technical_review_expirations USING btree (id_tec_rev_ex);


--
-- TOC entry 2100 (class 1259 OID 50581)
-- Name: travel_requests_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX travel_requests_pk ON travel_requests USING btree (id_trav_req);


--
-- TOC entry 2096 (class 1259 OID 50570)
-- Name: travels_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX travels_pk ON travels USING btree (id_trav);


--
-- TOC entry 2105 (class 1259 OID 50702)
-- Name: unique_schema_migrations; Type: INDEX; Schema: public; Owner: Andres; Tablespace: 
--

CREATE UNIQUE INDEX unique_schema_migrations ON schema_migrations USING btree (version);


--
-- TOC entry 2104 (class 1259 OID 50591)
-- Name: vehicles_pk; Type: INDEX; Schema: public; Owner: postgres; Tablespace: 
--

CREATE UNIQUE INDEX vehicles_pk ON vehicles USING btree (id_veh);


--
-- TOC entry 2131 (class 2620 OID 50720)
-- Name: trg_insert_users; Type: TRIGGER; Schema: public; Owner: Andres
--

CREATE TRIGGER trg_insert_users AFTER INSERT ON users FOR EACH ROW EXECUTE PROCEDURE insertar_clients();


--
-- TOC entry 2132 (class 2620 OID 50722)
-- Name: trg_update_users; Type: TRIGGER; Schema: public; Owner: Andres
--

CREATE TRIGGER trg_update_users AFTER UPDATE ON users FOR EACH ROW EXECUTE PROCEDURE actualizar_tipo_users();


--
-- TOC entry 2110 (class 2606 OID 50593)
-- Name: fk_assigned_relations_drivers; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY assigneds
    ADD CONSTRAINT fk_assigned_relations_drivers FOREIGN KEY (run_driv) REFERENCES drivers(run_driv) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2111 (class 2606 OID 50598)
-- Name: fk_assigned_relations_vehicles; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY assigneds
    ADD CONSTRAINT fk_assigned_relations_vehicles FOREIGN KEY (id_veh) REFERENCES vehicles(id_veh) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2113 (class 2606 OID 50608)
-- Name: fk_bill_det_relations_bills; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY bill_details
    ADD CONSTRAINT fk_bill_det_relations_bills FOREIGN KEY (id_bil) REFERENCES bills(id_bil) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2114 (class 2606 OID 50613)
-- Name: fk_bill_det_relations_concepts; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY bill_details
    ADD CONSTRAINT fk_bill_det_relations_concepts FOREIGN KEY (id_conc) REFERENCES concepts(id_conc) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2112 (class 2606 OID 50603)
-- Name: fk_bills_relations_external; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY bills
    ADD CONSTRAINT fk_bills_relations_external FOREIGN KEY (rut_ent) REFERENCES external_enterprises(rut_ent) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2115 (class 2606 OID 50618)
-- Name: fk_enterpri_cliente_clients; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY enterprise_clients
    ADD CONSTRAINT fk_enterpri_cliente_clients FOREIGN KEY (run_cli) REFERENCES clients(run_cli) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2116 (class 2606 OID 50623)
-- Name: fk_enterpri_relations_external; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY enterprise_clients
    ADD CONSTRAINT fk_enterpri_relations_external FOREIGN KEY (rut_ent) REFERENCES external_enterprises(rut_ent) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2117 (class 2606 OID 50628)
-- Name: fk_natural__cliente2_clients; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY natural_clients
    ADD CONSTRAINT fk_natural__cliente2_clients FOREIGN KEY (run_cli) REFERENCES clients(run_cli) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2119 (class 2606 OID 50638)
-- Name: fk_offer_ve_relations_drivers; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY offer_vehicles
    ADD CONSTRAINT fk_offer_ve_relations_drivers FOREIGN KEY (run_driv) REFERENCES drivers(run_driv) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2118 (class 2606 OID 50633)
-- Name: fk_offer_ve_relations_scheduli; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY offer_vehicles
    ADD CONSTRAINT fk_offer_ve_relations_scheduli FOREIGN KEY (id_block) REFERENCES scheduling_blocks(id_block) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2121 (class 2606 OID 50648)
-- Name: fk_scheduli_relations_clients; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY schedulings
    ADD CONSTRAINT fk_scheduli_relations_clients FOREIGN KEY (run_cli) REFERENCES clients(run_cli) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2120 (class 2606 OID 50643)
-- Name: fk_scheduli_relations_drivers; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY schedulings
    ADD CONSTRAINT fk_scheduli_relations_drivers FOREIGN KEY (run_driv) REFERENCES drivers(run_driv) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2122 (class 2606 OID 50653)
-- Name: fk_scheduli_relations_offer_ve; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY schedulings
    ADD CONSTRAINT fk_scheduli_relations_offer_ve FOREIGN KEY (id_off_veh) REFERENCES offer_vehicles(id_off_veh) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2124 (class 2606 OID 50663)
-- Name: fk_state_hi_relations_states; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY state_histories
    ADD CONSTRAINT fk_state_hi_relations_states FOREIGN KEY (id_stat) REFERENCES states(id_stat) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2123 (class 2606 OID 50658)
-- Name: fk_state_hi_relations_travels; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY state_histories
    ADD CONSTRAINT fk_state_hi_relations_travels FOREIGN KEY (id_trav) REFERENCES travels(id_trav) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2126 (class 2606 OID 50673)
-- Name: fk_transiti_relations_states; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY transitions
    ADD CONSTRAINT fk_transiti_relations_states FOREIGN KEY (id_stat) REFERENCES states(id_stat) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2125 (class 2606 OID 50668)
-- Name: fk_transiti_relations_states2; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY transitions
    ADD CONSTRAINT fk_transiti_relations_states2 FOREIGN KEY (sta_id_stat) REFERENCES states(id_stat) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2129 (class 2606 OID 50688)
-- Name: fk_travel_r_relations_clients; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY travel_requests
    ADD CONSTRAINT fk_travel_r_relations_clients FOREIGN KEY (run_cli) REFERENCES clients(run_cli) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2127 (class 2606 OID 50678)
-- Name: fk_travels_relations_drivers; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY travels
    ADD CONSTRAINT fk_travels_relations_drivers FOREIGN KEY (run_driv) REFERENCES drivers(run_driv) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2128 (class 2606 OID 50683)
-- Name: fk_travels_relations_travel_r; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY travels
    ADD CONSTRAINT fk_travels_relations_travel_r FOREIGN KEY (id_trav_req) REFERENCES travel_requests(id_trav_req) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2130 (class 2606 OID 50693)
-- Name: fk_vehicles_relations_owners; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY vehicles
    ADD CONSTRAINT fk_vehicles_relations_owners FOREIGN KEY (run_own) REFERENCES owners(run_own) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- TOC entry 2246 (class 0 OID 0)
-- Dependencies: 5
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2014-07-01 16:32:47

--
-- PostgreSQL database dump complete
--

